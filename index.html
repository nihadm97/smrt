<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Vježba C++ teži zadaci</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
  <div class="container">
    <div class="mb-3">
      <label for="exerciseSelector" class="form-label">Odaberi zadatak:</label>
      <select id="exerciseSelector" class="form-select" onchange="loadExercise()">
        <option value="1">Zadatak 1: Prosti brojevi</option>
        <option value="2">Zadatak 2: Dolari u kovanicama</option>
        <option value="3">Zadatak 3: Najveći broj while petlja</option>
        <option value="4">Zadatak 4: Zbir while petlja</option>
        <option value="5">Zadatak 5: Prosjek ocjena</option>
        <option value="6">Zadatak 6: Zbir i razlika unesenih brojeva</option>
        <option value="7">Zadatak 7: Formula 1</option>
        <option value="8">Zadatak 8: Udaljenost puta</option>
        <option value="9">Zadatak 9: Kusur</option>
        <option value="10">Zadatak 10: Ispis riječi više puta</option>
        <option value="11">Zadatak 11: Generiši riječ</option>
        <option value="12">Zadatak 12: Prosti brojevi lista 1</option>
        <option value="13">Zadatak 13: Prosti brojevi lista 2</option>
        <option value="14">Zadatak 14: Najveći broj sa while petljom</option>
        <option value="15">Zadatak 15: Samoglasnik a</option>
        <option value="16">Zadatak 16: Palindrom</option>
      </select>
    </div>

    <div id="exerciseDescription" class="alert alert-info">Odaberi zadatak kako bi pročitao opis zadatka i krenuo sa izradom rješenja.</div>

    <label for="codeEditor" class="form-label">Napiši svoj C++ Code:</label>
    <textarea id="codeEditor" class="form-control" rows="13" placeholder="// U ovom polju piši svoj code za zadatak" value="">
    #include <iostream>
    using namespace std;

        int main() {
           
           // VAMO PIŠI SVOJ CODE NE BRIŠI DIO IZNAD ILI ISPOD

           return 0;
        }
    </textarea>

    <label for="inputField" class="form-label">Input za program (ako ostaviš prazno uzima se da je input broj 0):</label> 
    <input type="text" id="inputField" class="form-control" placeholder="Unesi svoj input za testiranje code-a">

    <div class="d-flex justify-content-between mt-3">
      <button class="btn btn-primary" onclick="runCode()">Pokreni Code</button>
      <button class="btn btn-success" onclick="runTests()">Pokreni Autotestove</button>
    </div>

    <div id="output" class="mt-3 alert alert-secondary" style="white-space: pre-wrap;">Output će biti prikazan u ovom polju...</div>
  </div>

  <script>
    const exercises = {
      1: {
        description: 'Korisnik unosi broj n i ispisuju se svi prosti brojevi manji ili jednaki od n.',
        sampleInput: ["2 5", "10 4", "3 12", "12 10", "50 40"],
        expectedOutput: ["Zapremina valjka sa poluprečnikom 2 i dužinom visine 5 je 62.8", "Zapremina valjka sa poluprečnikom 10 i dužinom visine 4 je 1256", "Zapremina valjka sa poluprečnikom 3 i dužinom visine 12 je 339.12", "Zapremina valjka sa poluprečnikom 12 i dužinom visine 10 je 4521.6", "Zapremina valjka sa poluprečnikom 50 i dužinom visine 40 je 314000"]
      },
      2: {
        description: 'Korisnik unosi decimalni broj koji predstavlja iznos u dolarima, program ga konvertuje u cente i ispisuje najmanji broj kovanicama potreban za taj iznos. (NPR. ako unese 2.81 to je 281 centi i to su 5 kovanica po 50centi, jedna kovanica od 25centi, jedna kovanica od 5centi i jedna kovanica od 1cent, program ce ispisati broj 8 jer je 5+1+1+1=8).',
        sampleInput: ["4 5", "2 10", "10 5", "8 12", "50 43"],
        expectedOutput: ["Zapremina trostrane piramide dužine stranice 4 i dužine visine 5 je 46.188", "Zapremina trostrane piramide dužine stranice 2 i dužine visine 10 je 11.547", "Zapremina trostrane piramide dužine stranice 10 i dužine visine 5 je 721.688", "Zapremina trostrane piramide dužine stranice 8 i dužine visine 12 je 886.81", "Zapremina trostrane piramide dužine stranice 50 i dužine visine 43 je 775814"]
      },
      3: {
        description: 'Korisnik unosi brojeve sve dok ne unese nulu. Nakon što unese nulu ispiše se najveći broj što je korisnik unijeo.',
        sampleInput: ["10 9 5", "2 3 6", "100 140 70", "25 19 17", "2 7 13"],
        expectedOutput: ["Dužine dijagonale d i D kvadra dužina stranica 10 9 5 su 13.4536 14.3527", "Dužine dijagonale d i D kvadra dužina stranica 2 3 6 su 3.60555 7", "Dužine dijagonale d i D kvadra dužina stranica 100 140 70 su 172.047 185.742", "Dužine dijagonale d i D kvadra dužina stranica 25 19 17 su 31.4006 35.7071", "Dužine dijagonale d i D kvadra dužina stranica 2 7 13 su 7.28011 14.8997"]
      },
      4: {
        description: 'Korisnik unosi brojeve sve dok ne unese nulu. Nakon što unese nulu ispiše zbir svih brojeva što je korisnik unijeo.',
        sampleInput: ["2 10 14", "10 10 10", "29 30 50", "70 30 100", "150 110 120"],
        expectedOutput: ["26", "30", "109", "200", "380"]
      },
      5: {
        description: 'Korisnik unosi broj n, nakon cega unosi n brojeva od 1 do 5. Program ispisuje zakljucnu ocjenu na osnovu n unesenih ocjena.',
        sampleInput: ["3 5", "10 10", "100 15", "70 10", "100 110"],
        expectedOutput: ["Površina trougla čije su stranice duge 3 5 je 7.5", "Površina trougla čije su stranice duge 10 10 je 50", "Površina trougla čije su stranice duge 100 15 je 750", "Površina trougla čije su stranice duge 70 10 je 350", "Površina trougla čije su stranice duge 100 110 je 5500"]
      },
      6: {
        description: 'Korisnik unosi brojeve m i n (m < n), nakon čega se unosi n brojeva, ispisuje se zbir prvih m brojeva minus zbir ostalih brojeva.',
        sampleInput: ["5", "3", "10", "155", "1700"],
        expectedOutput: ["Površina pravilnog šestougla dužine stranice 5 je 64.9519", "Površina pravilnog šestougla dužine stranice 3 je 23.3827", "Površina pravilnog šestougla dužine stranice 10 je 259.808", "Površina pravilnog šestougla dužine stranice 155 je 62418.8", "Površina pravilnog šestougla dužine stranice 1700 je 7.50844e+06"]
      },
      7: {
        description: 'Korisnik unosi brojeve ai, ispisuje koliko je a1-a2+a3-a4+...-an.',
        sampleInput: ["7 1", "1 10", "10 -2", "0.2 0.1", "-0.7 0.3"],
        expectedOutput: ["z = 19", "z = -17", "z = 34", "z = 0.4", "z = -2.7"]
      },
      8: {
        description: 'Napisati program koji na osnovu učitanog rastojanja između dva grada, brzine automobila koji kreće iz prvog grada i brzine automobila koji kreće iz drugog grada izračuna vrijeme koje će proteći do susreta i puteve koje će preći svaki od ovih automobila.',
        sampleInput: ["0", "5", "-4", "-100", "12"],
        expectedOutput: ["y = 1", "y = 536", "y = -67", "y = -2.9297e+06", "y = 6157"]
      },
      9: {
        description: 'Napisati program koji pomaže kasirki da vrati kusur na osnovu cene i količine kupljenog artikla i količine novca koju je kupac dao (ovde se pretpostavlja da je kupljena samo jedna vrsta proizvoda). Kao rezultat treba ispisati koliki kusur treba da vrati kasirka.',
        sampleInput: ["1", "10"],
        expectedOutput: ["1", "10"]
      },
      10: {
        description: 'Učitati riječ sa tastature. Ispisati je onoliko puta koliko ima slova.',
        sampleInput: ["10", "100"],
        expectedOutput: ["10", "100"]
      },
      11: {
        description: 'Generiši string dužine koju korisnik unosi i sastoji se od nasumično odabranih slova iz skupa {A, T, G, C}.',
        sampleInput: ["-20", "20"],
        expectedOutput: ["-20", "20"]
      },
      12: {
        description: 'Korisnik unosi n brojeva, nakon sto unese sve brojeve ispisuju se svi prosti brojevi od prvog do zadnjeg.',
        sampleInput: ["7 1", "1 10", "10 -2", "0.2 0.1", "-0.7 0.3"],
        expectedOutput: ["z = 19", "z = -17", "z = 34", "z = 0.4", "z = -2.7"]
      },
      13: {
        description: 'Korisnik unosi n brojeva, nakon sto unese sve brojeve ispisuju se zadnji prosti broj koji je unesen.',
        sampleInput: ["0", "5", "-4", "-100", "12"],
        expectedOutput: ["y = 1", "y = 536", "y = -67", "y = -2.9297e+06", "y = 6157"]
      },
      14: {
        description: 'Korisnik unosi brojeve sve dok ne unese nulu. Nakon što unese nulu ispiše se najveći broj što je korisnik unijeo.',
        sampleInput: ["1", "10"],
        expectedOutput: ["1", "10"]
      },
      15: {
        description: 'Napiši program koji unosi riječ i ispisuje koliko puta se u njoj javlja samoglasnik a.',
        sampleInput: ["10", "100"],
        expectedOutput: ["10", "100"]
      },
      16: {
        description: 'Napiši program koji unosi jednu riječ i provijerava je li ona palindrom ili ne.',
        sampleInput: ["-20", "20"],
        expectedOutput: ["-20", "20"]
      }
    };

    async function runCode() {
      const code = document.getElementById('codeEditor').value;
      const selectedExercise = document.getElementById('exerciseSelector').value;
      let input = document.getElementById('inputField').value;
      if (input === "") {
        input = "0";
      }
      const outputElement = document.getElementById('output');

      const data = new URLSearchParams({
        code: code, 
        language: 'cpp',
        input: input,
      });

      const config = {
        method: 'POST',
        headers: {
          'Content-Type': 'application/x-www-form-urlencoded'
        },
        body: data
      };

      outputElement.textContent = "Code se pokreće...";

      try {
        const response = await fetch('https://api.codex.jaagrav.in', config);
        const result = await response.json();
        console.log(result.output);

        if (result.output) {
          outputElement.textContent = result.output;
        } else {
          outputElement.textContent = "Error: " + (result.error || "Nepoznati error se desio.");
        }
      } catch (error) {
        outputElement.textContent = "Error: " + error.message;
      }
    }

    async function runTests() {
  const selectedExercise = document.getElementById('exerciseSelector').value;
  const exercise = exercises[selectedExercise];
  const outputElement = document.getElementById('output');

  let testResults = [];
  let allTestsPassed = true;

  // Loop through the sample inputs
  for (let i = 0; i < exercise.sampleInput.length; i++) {
    const input = exercise.sampleInput[i];

    // Run the code with the current input
    const result = await runCodeWithInput(input);

    if (selectedExercise == 9 || selectedExercise == 10 || selectedExercise == 11) {
      // For tasks with random numbers, validate the range
      const numbers = result.trim().split(" ").map(Number);

      const [minRange, maxRange] = exercise.expectedOutput.map(Number);
      console.log(minRange, maxRange);
      const inRange = numbers.every(num => num >= minRange && num <= maxRange);

      if (inRange) {
        testResults.push(`Test ${i + 1}: Prošao (Svi brojevi su u opsegu)`);
      } else {
        testResults.push(`Test ${i + 1}: Pao (Brojevi nisu u opsegu: "${result.trim()}")`);
        allTestsPassed = false;
      }
    } else {
      // Standard comparison for fixed expected outputs
      const expected = exercise.expectedOutput[i];
      if (result.trim() === expected.trim()) {
        testResults.push(`Test ${i + 1}: Prošao`);
      } else {
        testResults.push(`Test ${i + 1}: Pao (Očekivani output: "${expected}", Stvarni output tvog programa: "${result}")`);
        allTestsPassed = false;
      }
    }
  }

  // Display the results
  if (allTestsPassed) {
    outputElement.textContent = "Svi testovi su uspješno završeni!";
  } else {
    outputElement.textContent = testResults.join("\n");
  }
}


    async function runCodeWithInput(input) {
      const code = document.getElementById('codeEditor').value;
      const data = new URLSearchParams({
        code: code, 
        language: 'cpp',
        input: input,
      });

      const config = {
        method: 'POST',
        headers: {
          'Content-Type': 'application/x-www-form-urlencoded'
        },
        body: data
      };

      try {
        const response = await fetch('https://api.codex.jaagrav.in', config);
        const result = await response.json();
        return result.output || "Error: " + (result.error || "Nepoznati error se desio.");
      } catch (error) {
        return "Error: " + error.message;
      }
    }

    function loadExercise() {
      const selectedExercise = document.getElementById('exerciseSelector').value;
      const exercise = exercises[selectedExercise];
      document.getElementById('exerciseDescription').textContent = exercise.description;
      document.getElementById('output').textContent = "Output će biti prikazan u ovom polju..."
    }

    loadExercise();
  </script>
</body>
</html>
